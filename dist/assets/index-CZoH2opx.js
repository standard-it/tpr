import{i as s}from"./index-DTEV5yGJ.js";import{k as i,e as c,N as n,O as l,M as p}from"./index-DEZaLq76.js";import{s as h}from"./index-CznklluM.js";const o="/v1/users",j=i("user",()=>{const r=c({access_token:"",description:"",email:"",fullname:"",password:"",permissions_id:1,phone:"+7",position:"",refresh_token:""}),t=c([]);return{element:r,elements:t,save:async()=>{try{const e=await s.post(o,r.value);t.value===null&&(t.value=[]),t.value.push(e.data),n.push({name:"user"})}catch(e){console.error("Error saving user:",e)}},update:async()=>{try{await s.put([o,r.value.id].join("/"),r.value),n.push({name:"user"})}catch(e){console.error("Error updating user:",e)}},remove:async()=>{try{await s.delete([o,r.value.id].join("/")),n.push({name:"user"})}catch(e){console.error("Error deleting user:",e)}},fetchAll:async()=>{try{const e=await s.get(o);t.value=e.data}catch(e){console.error("Error fetching users:",e)}},fetchOne:async e=>{try{const a=await s.get([o,e].join("/"));r.value=a.data}catch(a){console.error("Error fetching users:",a)}},signin:async()=>{try{const e=await s.post([o,"auth"].join("/"),r.value),{access_token:a,refresh_token:u}=e.data;l("ssoID",{access_token:a,refresh_token:u}),n.push({name:"home"})}catch(e){h({error:e})}},signout:()=>{p("ssoID"),n.push({name:"user-account"})}}});export{j as u};
