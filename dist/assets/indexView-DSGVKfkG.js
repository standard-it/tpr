import{d as k,o as a,c as m,b as p,t as P,_ as M,e as A,x as g,j as D,u as n,F as S,p as $,h as N,i as V,a as y,w as C,y as U,f as q}from"./index-DEZaLq76.js";import{C as I}from"./ComponentButton-C3meVf2-.js";import{C as L}from"./ComponentDropdownList-CakEUtGU.js";import{C as T}from"./ComponentHeading-BwTxAJ3r.js";import{u as z,a as F,b as j}from"./index-CSKS9Ij0.js";import{u as b}from"./index-EbIPtxbL.js";import{u as B}from"./index-BegdO8CZ.js";import{u as E}from"./index-DRKO1u0K.js";import"./index-DTEV5yGJ.js";import"./axios-CCb-kr4I.js";const H=["x","y"],R=["x","y"],W=k({__name:"ComponentTooltip",props:{text:{},x:{},y:{}},setup(h){const s=h;return(u,r)=>(a(),m("g",null,[p("rect",{x:s.x-50,y:s.y+20,width:"100",height:"30",rx:"5"},null,8,H),p("text",{x:s.x,y:s.y+40,"text-anchor":"middle"},P(u.text),9,R)]))}}),Z=M(W,[["__scopeId","data-v-2e9abe2f"]]),G=["d","transform"],J=["cx","cy","r","onMouseenter"],K=k({__name:"ComponentPoint",setup(h){const s=z(),u=B(),r=b(),d=A(!0),{path:w,transform:x}=F(),_=i=>{s.element={...i}},v=g(()=>{var i;return(i=s.elements)==null?void 0:i.filter(l=>l.schemes_id===u.element.id&&l.equipment_categories_id===1)}),c=g(()=>r.elements.find(i=>i.id===s.element.id));return s.fetchAll(),(i,l)=>(a(!0),m(S,null,D(v.value,(o,e)=>{var t;return a(),m("g",{key:e},[p("path",{d:n(w)(o),transform:n(x)(o)},null,8,G),o.point_positions?(a(),m(S,{key:0},[p("circle",{cx:o.point_positions.x,cy:o.point_positions.y,r:o.point_positions.r,onMouseenter:$(()=>{_(o),d.value=!1},["stop"]),onMouseleave:l[0]||(l[0]=f=>d.value=!0)},null,40,J),!d.value&&((t=c.value)==null?void 0:t.id)===o.id?(a(),N(Z,{key:0,text:c.value.name,x:o.point_positions.x??0,y:o.point_positions.y??0},null,8,["text","x","y"])):V("",!0)],64)):V("",!0)])}),128))}}),O=M(K,[["__scopeId","data-v-ce8572e5"]]),Q=["href"],X=k({__name:"indexView",setup(h){const s="http://192.168.20.8",u=E(),r=B(),d=b(),{state:w,startDrag:x,drag:_,endDrag:v,zoom:c}=j(),i=g(()=>{const{x:o,y:e,scale:t}=w.value;return`translate(${o}px, ${e}px) scale(${t})`}),l=g(()=>{var o,e;return`${s}/in/${(e=(o=r.elements)==null?void 0:o.filter(t=>t.id===r.element.id)[0])==null?void 0:e.file}`});return d.fetchAll(),u.fetchAll(),r.fetchAll(),(o,e)=>(a(),m("main",null,[y(T,null,{nav:C(()=>[y(I,{to:{name:"monitoring-view"}},{default:C(()=>e[5]||(e[5]=[q("Просмотр камер")])),_:1})]),default:C(()=>{var t;return[e[6]||(e[6]=p("h1",null,"Видеонаблюдение",-1)),e[7]||(e[7]=p("p",null,"В данном разделе при нажатии на правую кнопку мыши на точке с камерой можно подключиться к камере и увидеть изображение с нее.",-1)),y(L,{label:"План помещения",options:(t=n(r).elements)==null?void 0:t.map(f=>({value:f.id,label:f.name})),modelValue:n(r).element.id,"onUpdate:modelValue":e[0]||(e[0]=f=>n(r).element.id=f)},null,8,["options","modelValue"])]}),_:1}),p("section",null,[(a(),m("svg",{ref:"svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 720 720",width:"920",style:U({transform:i.value}),onMousedown:e[1]||(e[1]=$((...t)=>n(x)&&n(x)(...t),["prevent"])),onMousemove:e[2]||(e[2]=(...t)=>n(_)&&n(_)(...t)),onMouseup:e[3]||(e[3]=(...t)=>n(v)&&n(v)(...t)),onWheel:e[4]||(e[4]=$((...t)=>n(c)&&n(c)(...t),["prevent"]))},[n(r).element.id?(a(),m("image",{key:0,href:l.value},null,8,Q)):V("",!0),y(O)],36))])]))}}),me=M(X,[["__scopeId","data-v-52c5c9df"]]);export{me as default};
