import{d as b,U as y,c as w,a as r,w as a,b as m,o as x,f as i,p as d,u as n,_ as g}from"./index-DEZaLq76.js";import{C as p}from"./ComponentButton-C3meVf2-.js";import{C as f}from"./ComponentCard-D_QuY9Lo.js";import{C}from"./ComponentHeading-BwTxAJ3r.js";import{C as u}from"./ComponentInput-CTghgZJM.js";import{s as v}from"./index-CznklluM.js";import{P as S,m as s}from"./index-Bhxkf1XE.js";import{u as I}from"./index-BTKfwpAZ.js";import"./index-DTEV5yGJ.js";import"./axios-CCb-kr4I.js";const N=b({__name:"createView",setup(P){const e=I();e.element={name:"",type:"endpoint",transport:"transport-udp",context:"",disallow:"all",allow:"ulaw",outbound_auth:{type:"auth",auth_type:"userpass",password:"",username:""},from_user:"",from_domain:"",direct_media:"no",registration:{type:"registration",transport:"transport-udp",server_uri:"",client_uri:"",retry_interval:60,expiration:120,contact_user:""},identify:{type:"identify",endpoint:"",match:""},aors:{type:"aor",contact:""}};const _=new S({fieldName:"name",rule:l=>s(l,4),errorMessage:"Обязательно укажите наименование"},{fieldName:"from_domain",rule:l=>s(l,4),errorMessage:"Обязательно укажите имя домена SIP "},{fieldName:"outbound_auth.password",rule:l=>s(l,4),errorMessage:"Обязательно укажите пароль"}),V=()=>{const l=_.validate(e.element);if(Object.keys(l).length!==0){v(l);return}e.save()};return y(()=>{e.element.registration.server_uri=`sip:${e.element.from_domain}`,e.element.registration.client_uri=`sip:${e.element.from_user}@${e.element.from_domain}`,e.element.registration.contact_user=e.element.from_user,e.element.identify.endpoint=e.element.from_user,e.element.identify.match=e.element.from_domain,e.element.aors.contact=`sip:${e.element.from_domain}`,e.element.outbound_auth.username=e.element.from_user}),(l,t)=>(x(),w("main",null,[r(C,null,{nav:a(()=>[r(p,{to:{name:"trunk"}},{default:a(()=>t[8]||(t[8]=[i("Назад")])),_:1}),r(p,{onClick:t[0]||(t[0]=o=>V())},{default:a(()=>t[9]||(t[9]=[i("Сохранить")])),_:1})]),default:a(()=>[t[10]||(t[10]=m("h1",null,"Новая запись",-1)),t[11]||(t[11]=m("p",null," В этом разделе вы можете создать новый SIP-транк, указав основные параметры, такие как наименование, контекст, имя пользователя и пароль. Это позволяет добавить новый транк в систему для дальнейшей настройки и использования. ",-1))]),_:1}),m("section",null,[r(f,{tag:"article"},{default:a(()=>[m("form",{onSubmit:t[5]||(t[5]=d(()=>{},["prevent"]))},[r(u,{type:"text",label:"Наименование",required:"name",modelValue:n(e).element.name,"onUpdate:modelValue":t[1]||(t[1]=o=>n(e).element.name=o)},null,8,["modelValue"]),r(u,{type:"text",label:"Контекст",modelValue:n(e).element.context,"onUpdate:modelValue":t[2]||(t[2]=o=>n(e).element.context=o)},null,8,["modelValue"]),r(u,{type:"text",label:"Имя пользователя SIP",modelValue:n(e).element.from_user,"onUpdate:modelValue":t[3]||(t[3]=o=>n(e).element.from_user=o)},null,8,["modelValue"]),r(u,{type:"text",label:"Имя домена SIP",modelValue:n(e).element.from_domain,"onUpdate:modelValue":t[4]||(t[4]=o=>n(e).element.from_domain=o),required:"from_domain"},null,8,["modelValue"])],32)]),_:1}),r(f,{tag:"article"},{default:a(()=>[m("form",{onSubmit:t[7]||(t[7]=d(()=>{},["prevent"]))},[r(u,{type:"text",label:"Пароль",modelValue:n(e).element.outbound_auth.password,"onUpdate:modelValue":t[6]||(t[6]=o=>n(e).element.outbound_auth.password=o),required:"outbound_auth.password"},null,8,["modelValue"])],32)]),_:1})])]))}}),O=g(N,[["__scopeId","data-v-4cb5860f"]]);export{O as default};
