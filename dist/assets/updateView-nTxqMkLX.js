import{d as g,U,c as w,a as n,w as r,b as u,q as v,o as C,f as s,u as o,t as S,p as d,_ as I}from"./index-DEZaLq76.js";import{C as p}from"./ComponentButton-C3meVf2-.js";import{C as i}from"./ComponentCard-D_QuY9Lo.js";import{C as k}from"./ComponentHeading-BwTxAJ3r.js";import{C as m}from"./ComponentInput-CTghgZJM.js";import{s as P}from"./index-CznklluM.js";import{P as M,m as V}from"./index-Bhxkf1XE.js";import{u as N}from"./index-BTKfwpAZ.js";import"./index-DTEV5yGJ.js";import"./axios-CCb-kr4I.js";const q=g({__name:"updateView",setup(R){const t=N(),f=v(),b=new M({fieldName:"name",rule:a=>V(a,4),errorMessage:"Обязательно укажите наименование"},{fieldName:"from_domain",rule:a=>V(a,4),errorMessage:"Обязательно укажите имя домена SIP "},{fieldName:"outbound_auth.password",rule:a=>V(a,4),errorMessage:"Обязательно укажите пароль"}),y=()=>{const a=b.validate(t.element);if(Object.keys(a).length!==0){P(a);const e=document.querySelectorAll("[data-error]");for(const l of e){const x=l.getAttribute("data-error");if(a[x]){l.scrollIntoView({behavior:"smooth",block:"center"});break}}return}t.update()};return U(()=>{t.element.registration.server_uri=`sip:${t.element.from_domain}`,t.element.registration.client_uri=`sip:${t.element.from_user}@${t.element.from_domain}`,t.element.registration.contact_user=t.element.from_user,t.element.identify.endpoint=t.element.from_user,t.element.identify.match=t.element.from_domain,t.element.aors.contact=`sip:${t.element.from_domain}`,t.element.outbound_auth.username=t.element.from_user}),t.fetchOne(+f.params.id),(a,e)=>(C(),w("main",null,[n(k,null,{nav:r(()=>[n(p,{to:{name:"trunk"}},{default:r(()=>e[31]||(e[31]=[s("Назад")])),_:1}),n(p,{onClick:e[0]||(e[0]=l=>y())},{default:r(()=>e[32]||(e[32]=[s("Сохранить")])),_:1}),n(p,{onClick:o(t).remove},{default:r(()=>e[33]||(e[33]=[s("Удалить")])),_:1},8,["onClick"])]),default:r(()=>[u("h1",null,[e[34]||(e[34]=s("Редактирование ")),u("span",null,S(o(t).element.name),1)]),e[35]||(e[35]=u("p",null," В этом разделе вы можете создать новый SIP-транк, указав основные параметры, такие как наименование, контекст, имя пользователя и пароль. Это позволяет добавить новый транк в систему для дальнейшей настройки и использования. ",-1))]),_:1}),u("section",null,[n(i,{tag:"article"},{default:r(()=>[u("form",{onSubmit:e[10]||(e[10]=d(()=>{},["prevent"]))},[n(m,{type:"text",label:"Наименование",required:"name",modelValue:o(t).element.name,"onUpdate:modelValue":e[1]||(e[1]=l=>o(t).element.name=l)},null,8,["modelValue"]),n(m,{type:"text",label:"Тип",modelValue:o(t).element.type,"onUpdate:modelValue":e[2]||(e[2]=l=>o(t).element.type=l)},null,8,["modelValue"]),n(m,{type:"text",label:"Протокол",modelValue:o(t).element.transport,"onUpdate:modelValue":e[3]||(e[3]=l=>o(t).element.transport=l)},null,8,["modelValue"]),n(m,{type:"text",label:"Контекст",modelValue:o(t).element.context,"onUpdate:modelValue":e[4]||(e[4]=l=>o(t).element.context=l)},null,8,["modelValue"]),n(m,{type:"text",label:"Запретить",modelValue:o(t).element.disallow,"onUpdate:modelValue":e[5]||(e[5]=l=>o(t).element.disallow=l)},null,8,["modelValue"]),n(m,{type:"text",label:"Разрешить",modelValue:o(t).element.allow,"onUpdate:modelValue":e[6]||(e[6]=l=>o(t).element.allow=l)},null,8,["modelValue"]),n(m,{type:"text",label:"Имя пользователя SIP",modelValue:o(t).element.from_user,"onUpdate:modelValue":e[7]||(e[7]=l=>o(t).element.from_user=l)},null,8,["modelValue"]),n(m,{type:"text",label:"Имя домена SIP",modelValue:o(t).element.from_domain,"onUpdate:modelValue":e[8]||(e[8]=l=>o(t).element.from_domain=l),required:"from_domain","data-error":"from_domain"},null,8,["modelValue"]),n(m,{type:"text",label:"Передача медиа SIP",modelValue:o(t).element.direct_media,"onUpdate:modelValue":e[9]||(e[9]=l=>o(t).element.direct_media=l)},null,8,["modelValue"])],32)]),_:1}),n(i,{tag:"article"},{default:r(()=>[u("form",{onSubmit:e[18]||(e[18]=d(()=>{},["prevent"]))},[n(m,{type:"text",label:"Тип",modelValue:o(t).element.registration.type,"onUpdate:modelValue":e[11]||(e[11]=l=>o(t).element.registration.type=l)},null,8,["modelValue"]),n(m,{type:"text",label:"Протокол",modelValue:o(t).element.registration.transport,"onUpdate:modelValue":e[12]||(e[12]=l=>o(t).element.registration.transport=l)},null,8,["modelValue"]),n(m,{type:"text",label:"URI сервера",modelValue:o(t).element.registration.server_uri,"onUpdate:modelValue":e[13]||(e[13]=l=>o(t).element.registration.server_uri=l)},null,8,["modelValue"]),n(m,{type:"text",label:"URI клиента",modelValue:o(t).element.registration.client_uri,"onUpdate:modelValue":e[14]||(e[14]=l=>o(t).element.registration.client_uri=l)},null,8,["modelValue"]),n(m,{type:"text",label:"Интервал повторной попытки",modelValue:o(t).element.registration.retry_interval,"onUpdate:modelValue":e[15]||(e[15]=l=>o(t).element.registration.retry_interval=l),modelModifiers:{number:!0}},null,8,["modelValue"]),n(m,{type:"text",label:"Время до обновления",modelValue:o(t).element.registration.expiration,"onUpdate:modelValue":e[16]||(e[16]=l=>o(t).element.registration.expiration=l),modelModifiers:{number:!0}},null,8,["modelValue"]),n(m,{type:"text",label:"Имя пользователя для контактного URI",modelValue:o(t).element.registration.contact_user,"onUpdate:modelValue":e[17]||(e[17]=l=>o(t).element.registration.contact_user=l)},null,8,["modelValue"])],32)]),_:1}),n(i,{tag:"article"},{default:r(()=>[u("form",{onSubmit:e[22]||(e[22]=d(()=>{},["prevent"]))},[n(m,{type:"text",label:"Тип",modelValue:o(t).element.identify.type,"onUpdate:modelValue":e[19]||(e[19]=l=>o(t).element.identify.type=l)},null,8,["modelValue"]),n(m,{type:"text",label:"Идентификатор конечной точки",modelValue:o(t).element.identify.endpoint,"onUpdate:modelValue":e[20]||(e[20]=l=>o(t).element.identify.endpoint=l)},null,8,["modelValue"]),n(m,{type:"text",label:"IP-адреса или диапазоны для сопоставления",modelValue:o(t).element.identify.match,"onUpdate:modelValue":e[21]||(e[21]=l=>o(t).element.identify.match=l)},null,8,["modelValue"])],32)]),_:1}),n(i,{tag:"article"},{default:r(()=>[u("form",{onSubmit:e[27]||(e[27]=d(()=>{},["prevent"]))},[n(m,{type:"text",label:"Тип",modelValue:o(t).element.outbound_auth.type,"onUpdate:modelValue":e[23]||(e[23]=l=>o(t).element.outbound_auth.type=l)},null,8,["modelValue"]),n(m,{type:"text",label:"Тип авторизации",modelValue:o(t).element.outbound_auth.auth_type,"onUpdate:modelValue":e[24]||(e[24]=l=>o(t).element.outbound_auth.auth_type=l)},null,8,["modelValue"]),n(m,{type:"text",label:"Имя пользователя",modelValue:o(t).element.outbound_auth.username,"onUpdate:modelValue":e[25]||(e[25]=l=>o(t).element.outbound_auth.username=l)},null,8,["modelValue"]),n(m,{type:"text",label:"Пароль",required:"outbound_auth.password",modelValue:o(t).element.outbound_auth.password,"onUpdate:modelValue":e[26]||(e[26]=l=>o(t).element.outbound_auth.password=l),"data-error":"outbound_auth.password"},null,8,["modelValue"])],32)]),_:1}),n(i,{tag:"article"},{default:r(()=>[u("form",{onSubmit:e[30]||(e[30]=d(()=>{},["prevent"]))},[n(m,{type:"text",label:"Тип",modelValue:o(t).element.aors.type,"onUpdate:modelValue":e[28]||(e[28]=l=>o(t).element.aors.type=l)},null,8,["modelValue"]),n(m,{type:"text",label:"Контактный URI",modelValue:o(t).element.aors.contact,"onUpdate:modelValue":e[29]||(e[29]=l=>o(t).element.aors.contact=l),modelModifiers:{number:!0}},null,8,["modelValue"])],32)]),_:1})])]))}}),T=I(q,[["__scopeId","data-v-ca6fa8d1"]]);export{T as default};
